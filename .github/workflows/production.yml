name: File Operations via SSH

on:
  workflow_dispatch:
    inputs:
      operation:
        description: 'Operation to perform'
        required: true
        type: choice
        options:
          - rename
          - copy
          - delete
      source_file:
        description: 'Source filename'
        required: true
      destination_file:
        description: 'Destination filename (for rename/copy)'
        required: false

jobs:
  file-operation:
    runs-on: ubuntu-latest
    
    steps:
      - name: Execute file operation via SSH
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SSH_HOST }}
          username: ${{ secrets.SSH_USERNAME }}
          key: ${{ secrets.SSH_PRIVATE_KEY }}
          port: ${{ secrets.SSH_PORT }}
          script: |
            case "${{ github.event.inputs.operation }}" in
              rename)
                echo "Renaming file..."
                mv "${{ github.event.inputs.source_file }}" "${{ github.event.inputs.destination_file }}"
                echo "✓ Renamed to: ${{ github.event.inputs.destination_file }}"
                ;;
              copy)
                echo "Copying file..."
                cp "${{ github.event.inputs.source_file }}" "${{ github.event.inputs.destination_file }}"
                echo "✓ Copied to: ${{ github.event.inputs.destination_file }}"
                ;;
              delete)
                echo "Deleting file..."
                rm "${{ github.event.inputs.source_file }}"
                echo "✓ Deleted: ${{ github.event.inputs.source_file }}"
                ;;
            esac
